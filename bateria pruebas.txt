Batería de pruebas para API en Thunder Client
Base URL: http://localhost:3000

1. Login (POST /auth/login)
URL: http://localhost:3000/auth/login
Método: POST
Headers: Content-Type: application/json
Body JSON:
json
{ "username": "ventas1", "password": "1234" }
Nota: Guarda la cookie sesión que devuelve el servidor para las siguientes peticiones.



2. Logout (POST /auth/logout)
URL: http://localhost:3000/auth/logout
Método: POST
Headers: Cookie con sesión activa



3. Añadir stock (POST /stock/add) [rol compras]
URL: http://localhost:3000/stock/add
Método: POST
Headers: Content-Type: application/json, Cookie sesión usuario compras
Body JSON:
json
{ "code": "KB010", "description": "Teclado gaming compacto", "quantity": 10 }



4. Sacar stock (POST /stock/exit) [rol ventas]
URL: http://localhost:3000/stock/exit
Método: POST
Headers: Content-Type: application/json, Cookie sesión usuario ventas
Body JSON:
json
{ "code": "KB010", "quantity": 2 }




5. Marcar artículo obsoleto (PUT /stock/obsolete/:code) [rol ventas]
URL: http://localhost:3000/stock/obsolete/KB010
Método: PUT
Headers: Content-Type: application/json, Cookie sesión usuario ventas
Body JSON:
json
{ "obsolete": true }


6. Consultar artículo concreto (GET /stock/item/:code) [usuarios autenticados]
URL: http://localhost:3000/stock/item/KB010
Método: GET
Headers: Cookie sesión válida



7. Consultar todos los artículos (GET /stock/items) [usuarios autenticados]
URL: http://localhost:3000/stock/items
Método: GET
Headers: Cookie sesión válida



Notas para Thunder Client
Primero realiza el login para obtener la cookie de sesión automáticamente.

En las siguientes peticiones, no es necesario añadir manualmente el header Cookie, Thunder Client lo gestionará si usas la misma sesión y workspace.

Si quieres poner cookie manual, copia el valor connect.sid=... del login y pon en header:

text
Cookie: connect.sid=valor_de_cookie